<html>
<body>
	<script>
		var NTE = {

			bindModelAndView: function() {
				console.log("found model.fname<->view.fname")
				console.log("found model.lname<->view.lname")
				console.log("found model.fullname<->view.fullname")
				console.log("found model.fullname computed by change of fname,lname")
				console.log("found model.fullname relation with change of fname,lname")
				console.log("found model.fullname relation with change of fname,lname")
			},

			createApp: function(name) {
				var newApp = new app()
				newApp.name = name

				this.bindModelAndView(newApp)

				app_controller_init(newApp)

				// from loop into view
				document.body.appendChild(newApp.view.fname)
				document.body.appendChild(newApp.view.lname)
				document.body.appendChild(newApp.view.fullname)
				document.body.appendChild(newApp.view.save)				
				return newApp
			},
		}

		// global NTE 
		function input() {return document.createElement("INPUT");}
		function p() {var elem = document.createElement("P"); elem.NTE = {updateEveryKeyPress:false};return elem}
		function button(props) {var elem = document.createElement("BUTTON"); elem.innerText = props;return elem}
		
		function app() {
			return {

			    name: name,
			    
			    model: { 
			        fname: "Mario", 
			        lname: "Rossi", 
			        fullname: (fname,lname) => fname + ' ' + lname
			    },

			    view: {
			        fname: input(),
			        lname: input(),
			        fullname: p(),
			        save: button("send")
			    },

			    controller: {
					init: function() {
						debugger;
						this.fullname.NTE.updateEveryKeyPress = true
					},
				    async: {
				        save: function() {
				            send();
				        }
				    }
			    }

			}
		} // app

		// code generated by a server side parser 
		function app_controller_init(app) {
			var rtrn = app.controller.init.bind(app.view)()
			if (app.view.fullname.NTE.updateEveryKeyPress) {
				console.log("updateEveryKeyPress change, addListener...")
			}
		}

		var myApp = NTE.createApp("NTE Demo")

	</script>
</body>
</html>